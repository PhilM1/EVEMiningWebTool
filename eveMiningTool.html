<!DOCTYPE html>
<html>
<head>
<script>
//Written by Philippe Masson - Copyright 2013

var yield = 0;
var cycleTime = 0;
var yieldPerSecond = 0;
var oreVolume = 0;
var asteroidQuantity = 0;
var asteroidVolume = 0;
var timeToCompletion = 0;
var startTime = new Date().getTime();
//var veldsparVolume = 0.1; //testing purposes.
//var endTime = 0; //testing purposes.
//var timeLeft = 0; //testing purposes.


var endTime1 = 0;
var endTime2 = 0;
var endTime3 = 0;
var timeLeft1 = 0;
var timeLeft2 = 0;
var timeLeft3 = 0;

function start(num)
{
	//calculate yield per second with the yield amount and cycle time given.
	var yield = document.getElementById("yield1").value;
	var cycleTime = document.getElementById("cycle2").value;
	var yieldPerSecond = yield / cycleTime;
	
	//calculate how much time from now the asteroid will be depleted.
	if(num == 1)
	{
		var oreVolume = getOreVolume(document.getElementById("list1").value);
		var asteroidQuantity = document.getElementById("roid1").value;
		var asteroidVolume = asteroidQuantity * oreVolume;
		var timeToCompletion = asteroidVolume / yieldPerSecond;
		var startTime = new Date().getTime();
		endTime1 = startTime + (timeToCompletion * 1000);
	}
	else if(num == 2)
	{
		var oreVolume = getOreVolume(document.getElementById("list2").value);
		var asteroidQuantity = document.getElementById("roid2").value;
		var asteroidVolume = asteroidQuantity * oreVolume;
		var timeToCompletion = asteroidVolume / yieldPerSecond;
		var startTime = new Date().getTime();
		endTime2 = startTime + (timeToCompletion * 1000);
	}
	else if(num == 3)
	{
		var oreVolume = getOreVolume(document.getElementById("list3").value);
		var asteroidQuantity = document.getElementById("roid3").value;
		var asteroidVolume = asteroidQuantity * oreVolume;
		var timeToCompletion = asteroidVolume / yieldPerSecond;
		var startTime = new Date().getTime();
		endTime3 = startTime + (timeToCompletion * 1000);
	}
}

//Holds the metric cube values for each different ore in game.
function getOreVolume(selectedOre)
{
	if(selectedOre == "veldspar")
	{
		return 0.1;
	}
	else if(selectedOre == "scordite")
	{
		return 0.15;
	}
	else if(selectedOre == "pyroxeres")
	{
		return 0.3;
	}
	else if(selectedOre == "plagioclase")
	{
		return 0.35;
	}
	else if(selectedOre == "omber")
	{
		return 0.6;
	}
	else if(selectedOre == "kernite")
	{
		return 1.2;
	}
	else if(selectedOre == "jaspet")
	{
		return 2;
	}
	else if(selectedOre == "hemorphite" || selectedOre == "hedbergite")
	{
		return 3;
	}
	else if(selectedOre == "gneiss")
	{
		return 5;
	}
	else if(selectedOre == "darkOchre")
	{
		return 8;
	}
	else if(selectedOre == "spodumain" || selectedOre == "crokite" || selectedOre == "bistot" || selectedOre == "arkonor")
	{
		return 16;
	}
	else if(selectedOre == "mercoxit")
	{
		return 40;
	}
	
}

//Update the timers.
function updateYield()
{
	
	timeLeft1 = endTime1 - new Date().getTime();
	if(timeLeft1 / 1000 > 0)
	{
		document.getElementById("timeleft1").innerHTML = Math.round(timeLeft1 / 100) / 10;
	}
	else
	{
		document.getElementById("timeleft1").innerHTML = "Empty";
	}
	
	timeLeft2 = endTime2 - new Date().getTime();
	if(timeLeft2 / 1000 > 0)
	{
		document.getElementById("timeleft2").innerHTML = Math.round(timeLeft2 / 100) / 10;
	}
	else
	{
		document.getElementById("timeleft2").innerHTML = "Empty";
	}
	
	timeLeft3 = endTime3 - new Date().getTime();
	if(timeLeft3 / 1000 > 0)
	{
		document.getElementById("timeleft3").innerHTML = Math.round(timeLeft3 / 100) / 10;
	}
	else
	{
		document.getElementById("timeleft3").innerHTML = "Empty";
	}
}

var timerid = setInterval(updateYield, 33); //will call updateYield every 33ms
</script>
</head>
<body>
<h1>Eve Mining Helper</h1>

<table border="1" cellpadding="0" cellspacing="0" width="100%"   
style="background        color:white;">     
<tr>
     <td align="center">
	 <select id="list1">
		<option value="veldspar">Veldspar</option>
		<option value="scordite">Scordite</option>
		<option value="pyroxeres">Pyroxeres</option>
		<option value="plagioclase">Plagioclase</option>
		<option value="omber">Omber</option>
		<option value="kernite">Kernite</option>
		<option value="jaspet">Jaspet</option>
		<option value="hemorphite">Hemorphite</option>
		<option value="hedbergite">Hedbergite</option>
		<option value="spodumain">Spodumain</option>
		<option value="gneiss">Gneiss</option>
		<option value="darkOchre">Dark Ochre</option>
		<option value="crokite">Crokite</option>
		<option value="bistot">Bistot</option>
		<option value="arkonor">Arkonor</option>
		<option value="mercoxit">Mercoxit</option>
	 </select>
	 <p id="timeleft1"></p>
	 </td>    
	 
     <td align="center">
	 <select id="list2">
		<option value="veldspar">Veldspar</option>
		<option value="scordite">Scordite</option>
		<option value="pyroxeres">Pyroxeres</option>
		<option value="plagioclase">Plagioclase</option>
		<option value="omber">Omber</option>
		<option value="kernite">Kernite</option>
		<option value="jaspet">Jaspet</option>
		<option value="hemorphite">Hemorphite</option>
		<option value="hedbergite">Hedbergite</option>
		<option value="spodumain">Spodumain</option>
		<option value="gneiss">Gneiss</option>
		<option value="darkOchre">Dark Ochre</option>
		<option value="crokite">Crokite</option>
		<option value="bistot">Bistot</option>
		<option value="arkonor">Arkonor</option>
		<option value="mercoxit">Mercoxit</option>
	 </select>
	 <p id="timeleft2"></p>
	 </td>     
	 
	 <td align="center">
	 <select id="list3">
		<option value="veldspar">Veldspar</option>
		<option value="scordite">Scordite</option>
		<option value="pyroxeres">Pyroxeres</option>
		<option value="plagioclase">Plagioclase</option>
		<option value="omber">Omber</option>
		<option value="kernite">Kernite</option>
		<option value="jaspet">Jaspet</option>
		<option value="hemorphite">Hemorphite</option>
		<option value="hedbergite">Hedbergite</option>
		<option value="spodumain">Spodumain</option>
		<option value="gneiss">Gneiss</option>
		<option value="darkOchre">Dark Ochre</option>
		<option value="crokite">Crokite</option>
		<option value="bistot">Bistot</option>
		<option value="arkonor">Arkonor</option>
		<option value="mercoxit">Mercoxit</option>
	 </select>
	 <p id="timeleft3"></p>
	 </td>  
</tr>     
<tr>         
    <td align="center">Roid:<input type="text" name="roidAmmount1" id="roid1"><br></td> 
    <td align="center">Roid:<input type="text" name="roidAmmount2" id="roid2"><br></td> 
	<td align="center">Roid:<input type="text" name="roidAmmount3" id="roid3"><br></td>     
</tr>    
<tr>         
    <td align="center"><button type="button" onclick="start(1)">Start</button></td> 
    <td align="center"><button type="button" onclick="start(2)">Start</button></td> 
	<td align="center"><button type="button" onclick="start(3)">Start</button></td>     
</tr>    
</table>

<br>
Yield in Metric Cubes: <input type="text" name="yieldInput" id="yield1"><br>
Cycle Time in Seconds: <input type="text" name="cycleTimeInput" id="cycle2">


<p>
Basic mining tool to keep track of how much time is left before the asteroid is depleted.<br>
Enter the yield and cycle time for your strip miners. "Yield:" & "Cycle Time:"<br>
Select the asteroid type you are targeting (Drop down list)<br>
Enter the ammount of units the asteroid you are about to mine has. "Roid"<br>
Hit start and it will give you a countdown to when the asteroid will be depleted.<br><br><br>
</p>



</body>
</html>
